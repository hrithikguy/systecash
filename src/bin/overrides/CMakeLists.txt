
SET(GNC_PKGLIB_INSTALLDIR ${PKGLIBDIR})
SET(GNC_SCM_INSTALLDIR ${SCHEME_INSTALLED_SOURCE_DIR})
SET(GNC_LIB_INSTALLDIR ${LIBDIR})
SET(GNC_PYTHON_DIR ${GNUCASH_PATH_DIR})
SET(GUILE ${GUILE_EXECUTABLE})
SET(GNC_SRCDIR ${CMAKE_SOURCE_DIR})
SET(GNC_BUILDDIR ${CMAKE_BINARY_DIR})

CONFIGURE_FILE(systecash-make-guids.in ${CMAKE_CURRENT_BINARY_DIR}${CMAKE_FILES_DIRECTORY}/systecash-make-guids)
GNC_CONFIGURE(systecash-env.in ${CMAKE_CURRENT_BINARY_DIR}${CMAKE_FILES_DIRECTORY}/systecash-env)
GNC_CONFIGURE(guile.in ${CMAKE_CURRENT_BINARY_DIR}${CMAKE_FILES_DIRECTORY}/guile) #not installed
GNC_CONFIGURE(systecash-build-env.in ${CMAKE_CURRENT_BINARY_DIR}${CMAKE_FILES_DIRECTORY}/systecash-build-env)   # not installed

SET(SCRIPT_OUTPUT_DIR ${CMAKE_CURRENT_BINARY_DIR})
IF (GNC_BUILD_AS_INSTALL)
  SET(SCRIPT_OUTPUT_DIR ${LIBDIR_BUILD}exec/systecash/overrides)
ENDIF()

FOREACH(file systecash-make-guids systecash-env guile systecash-build-env)
  FILE(COPY ${CMAKE_CURRENT_BINARY_DIR}${CMAKE_FILES_DIRECTORY}/${file}
       DESTINATION ${SCRIPT_OUTPUT_DIR}
       FILE_PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE
  )
ENDFOREACH(file)

INSTALL(
    PROGRAMS
      ${SCRIPT_OUTPUT_DIR}/systecash-env
      ${SCRIPT_OUTPUT_DIR}/systecash-make-guids
    DESTINATION libexec/systecash/overrides
)
